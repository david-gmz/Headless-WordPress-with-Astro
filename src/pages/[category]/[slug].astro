---
import Layout from "@layouts/Layout.astro";
import SingleHeader from "@components/single/SingleHeader.astro";
import SingleContent from "@components/single/SingleContent.astro";
import SingleSidebar from "@components/single/SingleSidebar.astro";
import RelatedPost from "@components/single/RelatedPost.astro";

// Example data - In a real app, this would come from your CMS or API
const post = {
    title: "Mi primera aventura en bicicleta",
    category: "Historia",
    date: "2024-03-20",
    readingTime: "5",
    content: "Your markdown content here...",
    image: {
        src: "/public/5-bamboo-bike.jpg",
        alt: "Bicicleta en la montaña"
    },
    author: {
        name: "Juan Pérez",
        bio: "Ciclista y escritor",
        avatar: "/images/avatar.jpg"
    },
    tableOfContents: [
        { title: "Introducción", id: "introduccion" },
        { title: "El comienzo", id: "comienzo" },
        { title: "La aventura", id: "aventura" },
        { title: "Conclusión", id: "conclusion" }
    ]
};

const relatedPosts = [
    {
        title: "Mantenimiento básico de tu bicicleta",
        excerpt: "Guía completa para mantener tu bicicleta...",
        slug: "/tutoriales/mantenimiento-basico",
        category: "Tutoriales",
        date: "2024-03-18"
    }
    // Add more related posts...
];
// Fetch country data at build time
const countryData = await fetch(
    "https://restcountries.com/v3.1/translation/mexico"
).then(res => res.json());
console.log(countryData);
---

<Layout title={`${post.title} | Bambucleta nomade`}>
    <SingleHeader
        title={post.title}
        category={post.category}
        date={post.date}
        readingTime={post.readingTime}
    />

    <main class="container py-12">
        <div class="grid grid-cols-1 lg:grid-cols-[1fr_300px] gap-12">
            <SingleContent image={post.image} content={post.content} />

            <aside class="lg:sticky lg:top-20 lg:self-start">
                <SingleSidebar
                    author={post.author}
                    tableOfContents={post.tableOfContents}
                    countryData={countryData}
                />
            </aside>
        </div>
    </main>

    <RelatedPost posts={relatedPosts} />
</Layout>
